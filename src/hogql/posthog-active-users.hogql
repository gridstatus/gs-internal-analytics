SELECT
  {{DATE_FUNCTION}} AS period,
  COUNT(DISTINCT person_id) AS active_users
FROM events
WHERE {{LOGGED_IN_USER_FILTER}}
  AND {{DATE_FILTER}}
  AND {{USER_FILTER}}
GROUP BY period
ORDER BY period {{ORDER_DIRECTION}}

